{
  "version": 3,
  "sources": ["../index.ts"],
  "sourcesContent": ["const ENDPOINT = `https://parley-api-t3y3w7eb4a-wl.a.run.app`;\nconst ATTR_TARGET_NAME = `parley-target`;\n\ninterface CarrierData {\n    dot_number: number;\n    icc_dockets: string;\n    legal_name: string;\n    physical_address: string;\n    telephone_number: string;\n    cellphone_number: string;\n    carrier_score: number;\n    insurance: string;\n    operating_authority: string;\n    safety_rating_desc: string;\n    rebroker_risk: string;\n    basic_measure_unsafe_driving: number;\n    basic_measure_hours_of_service: number;\n    basic_measure_driver_fitness: number;\n    basic_measure_controlled_substance: number;\n    basic_measure_vehicle_maintence: number;\n    basic_alert_unsafe_driving: string;\n    basic_alert_hours_of_service: string;\n    basic_alert_driver_fitness: string;\n    basic_alert_controlled_substance: string;\n    basic_alert_vehicle_maintence: string;\n}\n\nconst init = async () => {\n    // select UI elements\n    const targets: NodeList = document.querySelectorAll(`[${ATTR_TARGET_NAME}]`);\n    const loader = document.querySelector<HTMLDivElement>(\n        '[data-parley=\"loader\"]'\n    );\n    if (!loader) return;\n\n    // listen for form submission\n    const form = document.querySelector(\"form\");\n    if (!form) return;\n\n    // define data fetching function\n    const getData = async (num): Promise<CarrierData | null> => {\n        try {\n            const response = await fetch(\n                `${ENDPOINT}/${num}`\n            );\n            if (response.status === 404) {\n                alert(`No records found for DOT Number ${num}`);\n                return null;\n            }\n            const data: CarrierData = await response.json();\n            return data;\n        } catch (error) {\n            console.log({ error });\n            return null;\n        }\n    };\n\n    // UI updating function\n    const updateUI = (data: CarrierData) => {\n        targets.forEach((target) => {\n            let val = data[String((<Element>target).getAttribute(ATTR_TARGET_NAME))];\n            if (val.toLowerCase() === \"false\" || \"true\") {\n                val = val.toLowerCase();\n                val = \"false\" ? \"NO\" : \"YES\";\n            }\n            if (val === \"\") {\n                val = \"No data\"\n            }\n            target.textContent = val;\n        });\n    };\n\n    // function to run on form submit\n    const formSubmit = async (event) => {\n        event.preventDefault();\n        const dotNumber = form.querySelector<HTMLInputElement>(\n            '[parley-form=\"dot-number\"]'\n        )?.value;\n        // call getData for DOT Number submitted through form\n        loader.classList.add(\"is-visible\");\n        const data = await getData(dotNumber);\n        // Update UI\n        if (!data) {\n            console.log(\"error getting carrier data!\");\n        } else {\n            updateUI(data);\n        }\n        setTimeout(() => {\n            loader.classList.remove(\"is-visible\");\n        }, 1000);\n    };\n    form.addEventListener(\"submit\", formSubmit);\n};\n\ndocument.addEventListener(\"DOMContentLoaded\", init);\n"],
  "mappings": ";;AAAA,MAAM,WAAW;AACjB,MAAM,mBAAmB;AA0BzB,MAAM,OAAO,YAAY;AAErB,UAAM,UAAoB,SAAS,iBAAiB,IAAI,mBAAmB;AAC3E,UAAM,SAAS,SAAS;AAAA,MACpB;AAAA,IACJ;AACA,QAAI,CAAC;AAAQ;AAGb,UAAM,OAAO,SAAS,cAAc,MAAM;AAC1C,QAAI,CAAC;AAAM;AAGX,UAAM,UAAU,OAAO,QAAqC;AACxD,UAAI;AACA,cAAM,WAAW,MAAM;AAAA,UACnB,GAAG,YAAY;AAAA,QACnB;AACA,YAAI,SAAS,WAAW,KAAK;AACzB,gBAAM,mCAAmC,KAAK;AAC9C,iBAAO;AAAA,QACX;AACA,cAAM,OAAoB,MAAM,SAAS,KAAK;AAC9C,eAAO;AAAA,MACX,SAAS,OAAP;AACE,gBAAQ,IAAI,EAAE,MAAM,CAAC;AACrB,eAAO;AAAA,MACX;AAAA,IACJ;AAGA,UAAM,WAAW,CAAC,SAAsB;AACpC,cAAQ,QAAQ,CAAC,WAAW;AACxB,YAAI,MAAM,KAAK,OAAiB,OAAQ,aAAa,gBAAgB,CAAC;AACtE,YAAI,IAAI,YAAY,MAAM,WAAW,QAAQ;AACzC,gBAAM,IAAI,YAAY;AACtB,gBAAM,UAAU,OAAO;AAAA,QAC3B;AACA,YAAI,QAAQ,IAAI;AACZ,gBAAM;AAAA,QACV;AACA,eAAO,cAAc;AAAA,MACzB,CAAC;AAAA,IACL;AAGA,UAAM,aAAa,OAAO,UAAU;AAChC,YAAM,eAAe;AACrB,YAAM,YAAY,KAAK;AAAA,QACnB;AAAA,MACJ,GAAG;AAEH,aAAO,UAAU,IAAI,YAAY;AACjC,YAAM,OAAO,MAAM,QAAQ,SAAS;AAEpC,UAAI,CAAC,MAAM;AACP,gBAAQ,IAAI,6BAA6B;AAAA,MAC7C,OAAO;AACH,iBAAS,IAAI;AAAA,MACjB;AACA,iBAAW,MAAM;AACb,eAAO,UAAU,OAAO,YAAY;AAAA,MACxC,GAAG,GAAI;AAAA,IACX;AACA,SAAK,iBAAiB,UAAU,UAAU;AAAA,EAC9C;AAEA,WAAS,iBAAiB,oBAAoB,IAAI;",
  "names": []
}
